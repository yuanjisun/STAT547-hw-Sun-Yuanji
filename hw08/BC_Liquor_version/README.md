# README: Homework 08 (BC Liquor Store Version)

This is the folder for STAT 547M Homework 8 (BC Liquor Store Version), which includes a shiny app. The goal of this homework is to optimize the website by adding more functions. Also, some bugs are also fixed.


To view the final report, choose the file `report.md` or `report.html`.

[Link to website](https://yuanjisun.shinyapps.io/BC_Liquor_app/)

[Link to ui.R](https://github.com/yuanjisun/STAT547-hw-Sun-Yuanji/blob/master/hw08/BC_Liquor_version/ui.R)

[Link to server.R](https://github.com/yuanjisun/STAT547-hw-Sun-Yuanji/blob/master/hw08/BC_Liquor_version/server.R)

__Features added to the app__
1. Add an option to sort the results table by price.

`checkboxInput()` is added to the UI

A corresponding if-else statement is added to the Server in which `arrange()` is used.

2. Add an image of the BC Liquor Store to the UI.

The image is added in a folder named `www`, and use `img(src = "imagename.png")` to add the image.

3. Use the DT package to turn the current results table into an interactive table.

The `DT` package is installed

Replace `tableOutput()` with `DT::dataTableOutput()` in UI.

Rereplace `renderTable()` with `DT::renderDataTable()` in Server.

4. Add parameters to the plot.

`shinyjs::colourInput()` is used which allows people to choose their own favorite color of the plot.

5. Warning issue when rendering an empty dataframe and plot is fixed.

If-else statement is added in Server. When the empty dataframe (`nrow=0`) is generated, a `NULL` is returned.

6. Experiment with packages that add extra features to Shiny, such as `shinydashboard`.

The user interface is more beautiful with `shinydashboard`. Looks more official and modern. `dashboardHeader`, `dashboardSidebar` and `dashboardBody` is used to optimize the UI.

7. Show the number of results found whenever the filters change. For example, when searching for Italian wines $20-$40, the app would show the text “We found 122 options for you”.

A `textOutput()` is added to the UI, and `renderText()` is used in its corresponding Server by using the number of rows in the `filtered()` object.

8. Allow the user to download the results table as a .csv file.

A `downloadButton()` is added to the UI and `downloadHandler()` is used in the Server.

9. When the user wants to see only wines, show a new input that allows the user to filter by sweetness level. Only show this input if wines are selected.

`conditionalPanel()` is used in UI and `identical (input$typeIn, "WINE")` is used in the server to realize this goal.

10. Allow the user to search for multiple alcohol types simultaneously, instead of being able to choose only wines/beers/etc.

`checkboxGroupInput()` is used in the UI to allow users choose multiple product types.

11. Data source and the link is added to the app.

`uiOutput` is used in UI, and `renderUI` and `tagList` are added in the Server.

12. An empty plot will be returned when there is no result meeting the criteria. No error, no warning.

__Report process__

1. I used `tabsetPanel()` to place the plot and the table in separate tabs generated by `shinydashboard`. However, the figure is covered by the sidebar. Thus, I removed this function.

2. Be careful when using if-else statement within another if-else statement. It is quite confusing to see the structure. Thus, it is important to have a good habit when coding.

3. Maybe there is a RStudio version issue because the download function does not work in RStudio. The problem is the default file name cannot be assigned to the file although the file itself is fine. However, it works on the website.

4. It is very important to put `()` after reactive dataframe. I ran into several errors because of missing `()`.

5. The most useful resource is Google. The shiny documentation is also helpful when choosing the visualization options. Dean Attali's Shiny Server gives some idea how to optimize the app.
